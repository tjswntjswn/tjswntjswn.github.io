<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{page.title|default: site.title}}</title>
    <link rel="stylesheet" href="{{'/css/butter.css'|relative_url}}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
      <a id="btn-back-to-top" href="#" style="
      display: block; 
      position: fixed; 
      bottom: 30px; 
      right: 30px; 
      width: 50px; 
      height: 50px; 
      background-color: #FBC02D; 
      color: #5D4037; 
      border-radius: 50%; 
      box-shadow: 0 4px 10px rgba(0,0,0,0.3); 
      text-align: center; 
      line-height: 50px; 
      font-size: 24px; 
      font-weight: bold; 
      z-index: 2147483647; 
      border: 2px solid #fff; 
      text-decoration: none;">
      â†‘
    </a>

    <script>
      // ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ ìŠ¤í¬ë¦½íŠ¸
      var mybutton = document.getElementById("btn-back-to-top");

      // ì²˜ìŒì—” ë²„íŠ¼ ìˆ¨ê¸°ê¸° (JSê°€ ì •ìƒ ìž‘ë™í•˜ë©´ ì—¬ê¸°ì„œ ìˆ¨ê²¨ì§)
      mybutton.style.display = "none";

      window.onscroll = function() { scrollFunction() };

      function scrollFunction() {
          // ìŠ¤í¬ë¡¤ì„ 20pxì´ë¼ë„ ë‚´ë¦¬ë©´ ë²„íŠ¼ ë“±ìž¥
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
              mybutton.style.display = "block";
          } else {
              mybutton.style.display = "none";
          }
      }
      
      // í´ë¦­ ì‹œ ë§¨ ìœ„ë¡œ ë¶€ë“œëŸ½ê²Œ ì´ë™ (href="#" ê¸°ë³¸ ê¸°ëŠ¥ ë³´ì¡°)
      mybutton.addEventListener("click", function(event){
          event.preventDefault();
          window.scrollTo({top: 0, behavior: 'smooth'});
      });

      document.addEventListener("DOMContentLoaded", function() {
            // ë³¸ì¸ ì €ìž¥ì†Œ ì£¼ì†Œ (ì •í™•í•´ì•¼ í•¨)
            const repo = "tjswntjswn/tjswntjswn.github.io"; 
            
            // GitHub APIë¡œ ì´ìŠˆ ëª©ë¡(ëŒ“ê¸€)ì„ ì‹¹ ê°€ì ¸ì˜´ (ìµœëŒ€ 100ê°œ)
            fetch(`https://api.github.com/repos/${repo}/issues?per_page=100`)
                .then(response => response.json())
                .then(data => {
                    const issueMap = {};
                    // ê°€ì ¸ì˜¨ ì´ìŠˆë“¤ì„ ì œëª© ê¸°ì¤€ìœ¼ë¡œ ì •ë¦¬
                    if (Array.isArray(data)) {
                        data.forEach(issue => {
                            // ì´ìŠˆ ì œëª©ê³¼ ëŒ“ê¸€ ìˆ˜ ë§¤í•‘
                            issueMap[issue.title.trim()] = issue.comments;
                        });
                    }

                    // HTMLì— ìžˆëŠ” 'ëŒ“ê¸€ ë°•ìŠ¤'ë“¤ì„ ì°¾ì•„ì„œ ìˆ«ìž ì±„ì›Œë„£ê¸°
                    document.querySelectorAll(".comment-cnt-target").forEach(el => {
                        const title = el.getAttribute("data-title").trim();
                        
                        // ë§¤ì¹­ë˜ëŠ” ëŒ“ê¸€ì´ ìžˆìœ¼ë©´ ê°¯ìˆ˜ í‘œì‹œ, ì—†ìœ¼ë©´ 0
                        if (issueMap[title] !== undefined) {
                             el.innerHTML = `ðŸ’¬ ${issueMap[title]}`;
                             if (issueMap[title] > 0) el.style.fontWeight = "bold"; // ëŒ“ê¸€ ìžˆìœ¼ë©´ êµµê²Œ
                        } else {
                             el.innerHTML = `ðŸ’¬ 0`;
                        }
                        
                        // ë¡œë”© ëë‚˜ë©´ íˆ¬ëª…ë„ 100% (ìŠ¤ë¥´ë¥µ ë‚˜íƒ€ë‚˜ê¸°)
                        el.style.opacity = 1;
                    });
                })
                .catch(err => console.log("ëŒ“ê¸€ ë¡œë”© ì‹¤íŒ¨:", err));
        });
    </script>
    {%include header.html%}
    <div class="container">
        {%include sidebar.html%}
        <main>{{content}}</main>
    </div>
    {%include footer.html%}
</body>
</html>