---
layout: default
---

<div class="post-layout">
    
    <div class="post-main-column">
        
        <article class="post-card">
            
            <header class="post-header">
                <div class="post-meta-top">
                    {% if page.categories.size > 0 %}
                        <span class="title-category">[{{ page.categories | join: ' / ' }}]</span>
                        <span class="meta-divider">|</span>
                    {% endif %}
                    <span class="post-date-detail">{{ page.date | date: "%Yë…„ %mì›” %dì¼" }}</span>
                    <span class="meta-divider">|</span>
                    <span class="comment-cnt-target" data-url="{{ page.url }}" data-title="{{ page.title }}">ğŸ’¬ 0</span>
                    <span class="meta-divider">|</span>
                    <span id="busuanzi_container_page_pv" style="display: inline;">ğŸ‘€ <span id="busuanzi_value_page_pv"></span></span>
                    </div>

                <h1 class="post-title-detail">{{ page.title }}</h1>
            </header>

            <div class="post-body">
                {{ content }}
            </div>

            <div class="post-interaction">
                <button id="btn-like" class="btn-like" onclick="fireConfetti()">
                    <i class="fas fa-heart" style="color: #E91E63; margin-right: 5px;"></i>
                    <span id="like-text">ì‘ì›í•˜ê¸°</span>
                </button>
                
                <button class="btn-share" onclick="copyLink()">
                    <i class="fas fa-link" style="color: #555; margin-right: 5px;"></i>
                    ê³µìœ í•˜ê¸°
                </button>
            </div>

        </article>

        <div id="toast-msg">ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“‹</div>

        <div class="related-posts-area">
            <h3 class="related-title-label">ì´ ê¸€ë„ ì½ì–´ë³´ì„¸ìš” ğŸ¯</h3>
            <div class="related-list">
                {% assign maxRelated = 3 %}
                {% assign count = 0 %}
                
                {% for post in site.posts %}
                    {% if post.url == page.url %}{% continue %}{% endif %}
                    {% if post.categories[0] == page.categories[0] %}
                        <a href="{{ post.url | relative_url }}" class="related-card">
                            <span class="related-date">{{ post.date | date: "%Y.%m.%d" }}</span>
                            <h4 class="related-title">{{ post.title }}</h4>
                        </a>
                        {% assign count = count | plus: 1 %}
                        {% if count >= maxRelated %}{% break %}{% endif %}
                    {% endif %}
                {% endfor %}

                {% if count < maxRelated %}
                    {% for post in site.posts limit:3 %}
                        {% if post.url == page.url %}{% continue %}{% endif %}
                        {% if count >= maxRelated %}{% break %}{% endif %}
                        <a href="{{ post.url | relative_url }}" class="related-card">
                            <span class="related-date">{{ post.date | date: "%Y.%m.%d" }}</span>
                            <h4 class="related-title">{{ post.title }}</h4>
                        </a>
                        {% assign count = count | plus: 1 %}
                    {% endfor %}
                {% endif %}
            </div>
        </div>

        <div class="post-card comment-section">
            <div class="comment-header">
                <h3 class="comment-title">Comments ğŸ’¬</h3>
                <p class="comment-desc">ê¶ê¸ˆí•œ ì ì´ë‚˜ ì‘ì›ì˜ í•œë§ˆë””ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”!</p>
            </div>
            <script src="https://utteranc.es/client.js"
                repo="tjswntjswn/tjswntjswn.github.io"
                issue-term="pathname"
                theme="github-light"
                crossorigin="anonymous"
                async>
            </script>
        </div>
    </div>

    <aside class="toc-sidebar">
        <div class="toc-container">
            <div class="toc-header" onclick="toggleToc()">
                <strong style="font-family: var(--font-title);">ğŸ“Œ</strong>
                <i id="toc-toggle-icon" class="fas fa-chevron-down"></i>
            </div>
            <div id="toc-content"></div> 
        </div>
    </aside>

</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

<script>
    // [1] ëª©ì°¨(TOC) í† ê¸€ í•¨ìˆ˜
    function toggleToc() {
        const tocContainer = document.querySelector('.toc-container');
        const tocSidebar = document.querySelector('.toc-sidebar');
        
        // CSSì˜ .collapsed í´ë˜ìŠ¤ë¥¼ ë„£ì—ˆë‹¤ ëºë‹¤ í•¨
        tocContainer.classList.toggle('collapsed');
        tocSidebar.classList.toggle('collapsed');
    }

    // [2] ì£¼ì†Œ ë³µì‚¬ ê¸°ëŠ¥
    function copyLink() {
        const url = window.location.href;
        navigator.clipboard.writeText(url).then(() => {
            showToast("ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ“‹");
        }).catch(err => {
            console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
        });
    }

    // [3] í† ìŠ¤íŠ¸ ë©”ì‹œì§€ ë„ìš°ê¸°
    function showToast(msg) {
        const toast = document.getElementById('toast-msg');
        toast.innerText = msg;
        toast.classList.add('show'); // CSSì˜ #toast-msg.show ê°€ ì‘ë™
        
        setTimeout(() => {
            toast.classList.remove('show');
        }, 2000); // 2ì´ˆ ë’¤ ì‚¬ë¼ì§
    }

    // [4] í­ì£½ í„°íŠ¸ë¦¬ê¸° (ì‘ì›í•˜ê¸° ë²„íŠ¼)
    function fireConfetti() {
        var count = 200;
        var defaults = {
            origin: { y: 0.7 }
        };

        function fire(particleRatio, opts) {
            confetti(Object.assign({}, defaults, opts, {
                particleCount: Math.floor(count * particleRatio)
            }));
        }

        fire(0.25, { spread: 26, startVelocity: 55 });
        fire(0.2, { spread: 60 });
        fire(0.35, { spread: 100, decay: 0.91, scalar: 0.8 });
        fire(0.1, { spread: 120, startVelocity: 25, decay: 0.92, scalar: 1.2 });
        fire(0.1, { spread: 120, startVelocity: 45 });
        
        showToast("ì‘ì› ê°ì‚¬í•©ë‹ˆë‹¤! ğŸ’–");
    }

    // [5] í˜ì´ì§€ ë¡œë“œ í›„ ì‹¤í–‰ (ëª©ì°¨ ìƒì„± & ì§„í–‰ë°”)
    document.addEventListener('DOMContentLoaded', function() {
        
        // --- ëª©ì°¨ ìë™ ìƒì„± ---
        var tocContainer = document.getElementById('toc-content');
        var headings = document.querySelectorAll('.post-body h2, .post-body h3');
        var tocSidebar = document.querySelector('.toc-sidebar');

        if (headings.length === 0) {
            // ì œëª©ì´ ì—†ìœ¼ë©´ ëª©ì°¨ ì˜ì—­ ìˆ¨ê¹€
            if(tocSidebar) tocSidebar.style.display = 'none';
        } else {
            var ul = document.createElement('ul');
            headings.forEach(function(heading, index) {
                var li = document.createElement('li');
                var a = document.createElement('a');

                // idê°€ ì—†ìœ¼ë©´ ìë™ ë¶€ì—¬
                if (!heading.id) heading.id = 'heading-' + index;

                a.href = '#' + heading.id;
                a.innerText = heading.innerText;
                
                // h3ëŠ” ë“¤ì—¬ì“°ê¸° í´ë˜ìŠ¤ ì¶”ê°€ (CSS .h3-link í™œìš©)
                if(heading.tagName.toLowerCase() === 'h3') {
                    a.classList.add('h3-link');
                }

                li.appendChild(a);
                ul.appendChild(li);
            });
            tocContainer.appendChild(ul);
        }

        // --- ì½ê¸° ì§„í–‰ë°” ìƒì„± ---
        if (!document.getElementById("progress-container")) {
            var barContainer = document.createElement("div");
            barContainer.id = "progress-container";
            barContainer.innerHTML = '<div id="progress-bar"></div>';
            document.body.appendChild(barContainer);
        }

        // --- ìŠ¤í¬ë¡¤ ê°ì§€ ë° ì§„í–‰ë°” ì—…ë°ì´íŠ¸ ---
        window.addEventListener('scroll', function() {
            var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            var scrolled = (height > 0) ? (winScroll / height) * 100 : 0;
            var bar = document.getElementById("progress-bar");
            if (bar) bar.style.width = scrolled + "%";
        });
    });
</script>